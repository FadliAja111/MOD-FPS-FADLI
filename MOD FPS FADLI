repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local MaterialService = game:GetService("MaterialService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local Workspace = game:GetService("Workspace")

pcall(function()
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "POTATO MODE",
        Text = "FADLI MOD",
        Duration = 12
    })
end)

if setfpscap then
    setfpscap(45)
end

settings().Rendering.QualityLevel = 0
settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level04

Lighting.GlobalShadows = false
Lighting.FogEnd = 9e2
Lighting.ShadowSoftness = 0

for _,v in pairs(Lighting:GetChildren()) do
    if v:IsA("PostEffect")
    or v:IsA("SunRaysEffect")
    or v:IsA("Atmosphere")
    or v:IsA("Sky")
    or v:IsA("Clouds")
    or v:IsA("BloomEffect")
    or v:IsA("ColorCorrectionEffect")
    or v:IsA("DepthOfFieldEffect") then
        v:Destroy()
    end
end

local Terrain = workspace:FindFirstChildOfClass("Terrain")
if Terrain then
    Terrain.WaterWaveSize = 0
    Terrain.WaterWaveSpeed = 0
    Terrain.WaterReflectance = 0
    Terrain.WaterTransparency = 1
end

MaterialService.Use2022Materials = false
for _,v in pairs(MaterialService:GetChildren()) do
    v:Destroy()
end

local function destroyPotato(obj)
    pcall(function()
        if obj:IsA("ParticleEmitter")
        or obj:IsA("Trail")
        or obj:IsA("Smoke")
        or obj:IsA("Fire")
        or obj:IsA("Sparkles")
        or obj:IsA("Explosion")
        or obj:IsA("Clothing")
        or obj:IsA("BaseWrap")
        or obj:IsA("Decal")
        or obj:IsA("Texture")
        or obj:IsA("Sky")
        or obj:IsA("Atmosphere")
        or obj:IsA("Clouds")
        or obj:IsA("PointLight")
        or obj:IsA("SpotLight")
        or obj:IsA("SurfaceLight")
        or obj:IsA("PostEffect")
        or obj:IsA("SunRaysEffect")
        or obj:IsA("Shirt")
        or obj:IsA("Pants")
        or obj:IsA("ShirtGraphic")
        or obj:IsA("Hat")
        or obj:IsA("WrapLayer")
        or obj:IsA("Accessory")
        or obj:IsA("MaterialVariant")
        or obj:IsA("HopperBin") then
            obj:Destroy()
        end

        if obj:IsA("MeshPart") then
            obj.Material = Enum.Material.Plastic
            obj.Reflectance = 0
            obj.Transparency = 1
            obj.RenderFidelity = Enum.RenderFidelity.Performance
        end

        if obj:IsA("BasePart") then
            obj.Material = Enum.Material.Plastic
            obj.Reflectance = 0
            obj.CastShadow = false
        end

        if obj:IsA("Model") then
            obj.LevelOfDetail = 1
        end
        
        if obj:IsA("FaceInstance") then
            obj.Transparency = 1
            obj.Shiny = 0
        end
    end)
end

for _,v in pairs(character:GetDescendants()) do
    destroyPotato(v)
end

for _,v in pairs(Workspace:GetDescendants()) do
    if not v:IsDescendantOf(player.PlayerGui) then
        destroyPotato(v)
    end
end
